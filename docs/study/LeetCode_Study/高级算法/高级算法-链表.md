# é«˜çº§ç®—æ³•

> é¢˜åº“é“¾æ¥ï¼šhttps://leetcode-cn.com/explore/interview/card/top-interview-questions-hard/

* é“¾è¡¨

  1. åˆå¹¶Kä¸ªå…ƒç´ çš„æœ‰åºé“¾è¡¨

   + è¯­è¨€ï¼šjava

   + æ€è·¯ï¼šéå†æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œä½¿ç”¨javaå°é¡¶å †ã€‚æœ€åå†é€ä¸ªå–å‡ºå°é¡¶å †çš„å…ƒç´ å³å¯ã€‚

   + ä»£ç ï¼ˆ7msï¼Œ46.51%ï¼Œ41.7MBï¼Œ48.53%ï¼‰ï¼š

     ```java
     /**
      * Definition for singly-linked list.
      * public class ListNode {
      *     int val;
      *     ListNode next;
      *     ListNode(int x) { val = x; }
      * }
      */
     class Solution {
         public ListNode mergeKLists(ListNode[] lists) {
             int len = lists.length;
             if(len==0)
                 return null;
     
             ListNode tmp,res;
             PriorityQueue<ListNode> minStack = new PriorityQueue<>((a,b)->a.val-b.val);
             for(int i = 0;i<len;++i){
                 tmp = lists[i];
                 while(tmp!=null){
                     minStack.add(tmp);
                     tmp = tmp.next;
                 }
             }
             tmp = new ListNode(-1);
             res = tmp;
             while(!minStack.isEmpty()){
                 tmp.next = minStack.poll();
                 tmp = tmp.next;
             }
             tmp.next = null;
             return res.next;
         }
     }
     ```

  + å‚è€ƒä»£ç 1ï¼ˆ119msï¼Œ23.38%ï¼‰ï¼šä¸¤ä¸¤åˆå¹¶

    > [4 ç§æ–¹æ³•è¯¦è§£ï¼ŒğŸ¤·â€â™€ï¸å¿…é¡»ç§’æ‡‚ï¼](https://leetcode-cn.com/problems/merge-k-sorted-lists/solution/4-chong-fang-fa-xiang-jie-bi-xu-miao-dong-by-sweet/)

    ```java
    /**
     * Definition for singly-linked list.
     * public class ListNode {
     *     int val;
     *     ListNode next;
     *     ListNode(int x) { val = x; }
     * }
     */
    class Solution {
    
        private ListNode merge2Lists(ListNode l1, ListNode l2) {
            ListNode dummyHead = new ListNode(0);
            ListNode tail = dummyHead;
            while (l1 != null && l2 != null) {
                if (l1.val < l2.val) {
                    tail.next = l1;
                    l1 = l1.next;
                } else {
                    tail.next = l2;
                    l2 = l2.next;
                }
                tail = tail.next;
            }
    
            tail.next = l1 == null? l2: l1;
    
            return dummyHead.next;
        }
    
        public ListNode mergeKLists(ListNode[] lists) {
            ListNode res = null;
            for (ListNode list: lists) {
                res = merge2Lists(res, list);
            }
            return res;
    
        }
    }
    ```

  + å‚è€ƒä»£ç 2ï¼ˆ5msï¼‰ï¼šåˆ†è€Œæ²»ä¹‹ï¼Œä¸¤ä¸¤åˆå¹¶ã€‚

    > [åˆå¹¶ K ä¸ªæ’åºé“¾è¡¨](https://leetcode-cn.com/problems/merge-k-sorted-lists/solution/leetcode-23-he-bing-kge-pai-xu-lian-biao-by-powcai/)

    ```java
    /**
     * Definition for singly-linked list.
     * public class ListNode {
     *     int val;
     *     ListNode next;
     *     ListNode(int x) { val = x; }
     * }
     */
    class Solution {
       public ListNode mergeKLists(ListNode[] lists) {
            if (lists == null || lists.length == 0) return null;
            PriorityQueue<ListNode> queue = new PriorityQueue<>(lists.length, new Comparator<ListNode>() {
                @Override
                public int compare(ListNode o1, ListNode o2) {
                    if (o1.val < o2.val) return -1;
                    else if (o1.val == o2.val) return 0;
                    else return 1;
                }
            });
            ListNode dummy = new ListNode(0);
            ListNode p = dummy;
            for (ListNode node : lists) {
                if (node != null) queue.add(node);
            }
            while (!queue.isEmpty()) {
                p.next = queue.poll();
                p = p.next;
                if (p.next != null) queue.add(p.next);
            }
            return dummy.next;
        }
    }
    ```

  + å‚è€ƒä»£ç 3ï¼ˆ3msï¼Œ83.5%ï¼‰ï¼šåˆ†è€Œæ²»ä¹‹

    > [åˆå¹¶ K ä¸ªæ’åºé“¾è¡¨](https://leetcode-cn.com/problems/merge-k-sorted-lists/solution/leetcode-23-he-bing-kge-pai-xu-lian-biao-by-powcai/)

    ```java
    /**
     * Definition for singly-linked list.
     * public class ListNode {
     *     int val;
     *     ListNode next;
     *     ListNode(int x) { val = x; }
     * }
     */
    class Solution {
        public ListNode mergeKLists(ListNode[] lists) {
            if (lists == null || lists.length == 0) return null;
            return merge(lists, 0, lists.length - 1);
        }
    
        private ListNode merge(ListNode[] lists, int left, int right) {
            if (left == right) return lists[left];
            int mid = left + (right - left) / 2;
            ListNode l1 = merge(lists, left, mid);
            ListNode l2 = merge(lists, mid + 1, right);
            return mergeTwoLists(l1, l2);
        }
    
        private ListNode mergeTwoLists(ListNode l1, ListNode l2) {
            if (l1 == null) return l2;
            if (l2 == null) return l1;
            if (l1.val < l2.val) {
                l1.next = mergeTwoLists(l1.next, l2);
                return l1;
            } else {
                l2.next = mergeTwoLists(l1,l2.next);
                return l2;
            }
        }
    }
    ```

  + å‚è€ƒä»£ç 4ï¼ˆ1msï¼‰ï¼šä¹Ÿæ˜¯å½’å¹¶ï¼Œä¸¤ä¸¤åˆå¹¶

    ```java
    /**
     * Definition for singly-linked list.
     * public class ListNode {
     *     int val;
     *     ListNode next;
     *     ListNode(int x) { val = x; }
     * }
     */
    class Solution {
        public ListNode mergeKLists(ListNode[] lists) {
            if(lists.length == 0) return null;
            return mergeKLists(lists,0,lists.length - 1);
    
        }
    
        private ListNode merge2Lists(ListNode l1,ListNode l2){
            ListNode res = new ListNode(0);
            ListNode l = res;
    
            while(l1 != null && l2 != null){
                if( l1.val <= l2.val){
                    l.next = l1;
                    l1 = l1.next;
                    l = l.next;
                }else{
                    l.next = l2;
                    l2 = l2.next;
                    l = l.next;
                }
            }
            if(l1 != null) l.next = l1;
            if(l2 != null) l.next = l2;
    
            return res.next;
        }
        private  ListNode mergeKLists(ListNode[] lists,int start ,int end){
    
            if(start == end) return lists[start];
            ListNode l1= null,l2= null;
            if(end - start > 1){
                l1 = mergeKLists(lists,start,(start+end) / 2);
                l2 = mergeKLists(lists,(start + end) / 2 + 1,end);
            }else{
                l1 = lists[start];
                l2 = lists[end];
            }
    
            return merge2Lists(l1,l2);
    
    
    
        }
    }
    ```

  + å‚è€ƒåé‡å†™ï¼ˆ1msï¼Œ100%ï¼Œæ²¡æƒ³åˆ°è¿˜æŒºå¿«ï¼‰ï¼šå°è¯•ä¸€ä¸‹åˆ†æ²»å†åˆå¹¶çš„å†™æ³•ï¼ˆä¸»è¦æ˜¯å¤ä¹ ä¸€ä¸‹è¿™ç§æ€ç»´ï¼‰

    ```java
    /**
     * Definition for singly-linked list.
     * public class ListNode {
     *     int val;
     *     ListNode next;
     *     ListNode(int x) { val = x; }
     * }
     */
    class Solution {
        public ListNode mergeKLists(ListNode[] lists) {
            if (lists == null || lists.length == 0) return null;
            return divideAndMerge(lists,0,lists.length-1);
        }
    
        public ListNode divideAndMerge(ListNode[] lists,int left,int right){
            if(left==right)
                return lists[left];
            int mid = left+(right-left)/2;
            ListNode l = divideAndMerge(lists,left,mid );
            ListNode r = divideAndMerge(lists, mid+1,right);
            return merge(l,r);
        }
    
        public ListNode merge(ListNode a,ListNode b){
            if(a==null||b==null)
                return a==null?b:a;
            ListNode tail = new ListNode(0),res = tail;
            while(a!=null&&b!=null){
                if(a.val<b.val){
                    tail.next = a;
                    a = a.next;
                }else{
                    tail.next = b;
                    b = b.next;
                }
                tail = tail.next;
            }
            if(a!=null)
                tail.next = a;
            if(b!=null)
                tail.next = b;
            return res.next;
        }
    }
    ```

  2. é“¾è¡¨æ’åº

  + è¯­è¨€ï¼šjava

  + æ€è·¯ï¼šå †æ’åºæ—¶é—´Oï¼ˆnlogKï¼‰ï¼Œç©ºé—´å¤æ‚åº¦Oï¼ˆkï¼‰ã€‚ä½¿ç”¨javaçš„ä¼˜å…ˆé˜Ÿåˆ—

  + ä»£ç ï¼ˆ11msï¼Œ19.97%ï¼‰ï¼šæ²¡æƒ³åˆ°è¿™ä¹ˆæ…¢ã€‚

    ```java
    /**
     * Definition for singly-linked list.
     * public class ListNode {
     *     int val;
     *     ListNode next;
     *     ListNode(int x) { val = x; }
     * }
     */
    class Solution {
        public ListNode sortList(ListNode head) {
            if(head==null)
                return null;
            PriorityQueue<ListNode> minStack = new PriorityQueue<>((a,b)->a.val-b.val);
            while(head!=null){
                minStack.add(head);
                head = head.next;
            }
            ListNode tail = new ListNode(0),res = tail;
            while(!minStack.isEmpty()){
                tail.next = minStack.poll();
                tail = tail.next;
            }
            tail.next = null;
            return res.next;
        }
    }
    ```

  + å‚è€ƒä»£ç 1ï¼ˆ3msï¼Œ99.01%ï¼‰ï¼šè¿™ä¸ªå¾ˆæ¸…æ™°ã€‚

    > [Sort List ï¼ˆå½’å¹¶æ’åºé“¾è¡¨ï¼‰--æ¥¼ä¸‹è¯„è®ºåŒº](https://leetcode-cn.com/problems/sort-list/solution/sort-list-gui-bing-pai-xu-lian-biao-by-jyd/)

    ```java
    class Solution {
      public ListNode sortList(ListNode head) {
        // 1ã€é€’å½’ç»“æŸæ¡ä»¶
        if (head == null || head.next == null) {
          return head;
        }
    
        // 2ã€æ‰¾åˆ°é“¾è¡¨ä¸­é—´èŠ‚ç‚¹å¹¶æ–­å¼€é“¾è¡¨ & é€’å½’ä¸‹æ¢
        ListNode midNode = middleNode(head);
        ListNode rightHead = midNode.next;
        midNode.next = null;
    
        ListNode left = sortList(head);
        ListNode right = sortList(rightHead);
    
        // 3ã€å½“å‰å±‚ä¸šåŠ¡æ“ä½œï¼ˆåˆå¹¶æœ‰åºé“¾è¡¨ï¼‰
        return mergeTwoLists(left, right);
      }
    
      //  æ‰¾åˆ°é“¾è¡¨ä¸­é—´èŠ‚ç‚¹ï¼ˆ876. é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹ï¼‰
      private ListNode middleNode(ListNode head) {
        if (head == null || head.next == null) {
          return head;
        }
        ListNode slow = head;
        ListNode fast = head.next.next;
    
        while (fast != null && fast.next != null) {
          slow = slow.next;
          fast = fast.next.next;
        }
    
        return slow;
      }
    
      // åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ï¼ˆ21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ï¼‰
      private ListNode mergeTwoLists(ListNode l1, ListNode l2) {
        ListNode sentry = new ListNode(-1);
        ListNode curr = sentry;
    
        while(l1 != null && l2 != null) {
          if(l1.val < l2.val) {
            curr.next = l1;
            l1 = l1.next;
          } else {
            curr.next = l2;
            l2 = l2.next;
          }
    
          curr = curr.next;
        }
    
        curr.next = l1 != null ? l1 : l2;
        return sentry.next;
      }
    }
    ```

  + å‚è€ƒä»£ç 2ï¼ˆ3msï¼Œ99.23%ï¼‰ï¼šè™½ç„¶æˆ‘ä¹Ÿæœ‰æƒ³åˆ°è¦ç”¨å½’å¹¶æ’åºï¼Œä½†è§‰å¾—æ‹†åˆ†é“¾è¡¨æ¯”æ•°ç»„éº»çƒ¦ï¼Œåˆ»æ¿ä»¥ä¸ºç©ºé—´å¤æ‚åº¦å°±æ˜¯O(n)ã€‚<u>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºä¿è¯ç©ºé—´å¤æ‚åº¦ç”±ä¼ ç»Ÿå½’å¹¶æ’åºçš„O(n)å‡å°åˆ°O(1)ï¼Œéœ€è¦å€Ÿç”¨åŒæŒ‡é’ˆã€‚è€Œæ‹†åˆ†é“¾è¡¨æ—¶ï¼Œæ‰¾ä¸­ç‚¹ç”¨åˆ°å¿«æ…¢æŒ‡é’ˆã€‚</u>

    > [Sort List ï¼ˆå½’å¹¶æ’åºé“¾è¡¨ï¼‰](https://leetcode-cn.com/problems/sort-list/solution/sort-list-gui-bing-pai-xu-lian-biao-by-jyd/)

    ```java
    class Solution {
        public ListNode sortList(ListNode head) {
            if (head == null || head.next == null)
                return head;
            ListNode fast = head.next, slow = head;
            while (fast != null && fast.next != null) {
                slow = slow.next;
                fast = fast.next.next;
            }
            ListNode tmp = slow.next;
            slow.next = null;
            ListNode left = sortList(head);
            ListNode right = sortList(tmp);
            ListNode h = new ListNode(0);
            ListNode res = h;
            while (left != null && right != null) {
                if (left.val < right.val) {
                    h.next = left;
                    left = left.next;
                } else {
                    h.next = right;
                    right = right.next;
                }
                h = h.next;
            }
            h.next = left != null ? left : right;
            return res.next;
        }
    }
    ```

  + å‚è€ƒåé‡å†™ï¼ˆ3msï¼Œ99.23%ï¼‰ï¼šéœ€è¦æ³¨æ„çš„ç‚¹ä¸»è¦å°±æ˜¯æ‰¾ä¸­ç‚¹å’Œå·¦å³æ‹†åˆ†çš„æ­¥éª¤

    ```java
    class Solution {
        public ListNode sortList(ListNode head) {
            if(head==null||head.next==null)
                return head; // åªæœ‰å•ä¸ªèŠ‚ç‚¹
    
            // (1) æ‰¾ä¸­ç‚¹ï¼Œå·¦å³æ‹†åˆ†
            ListNode midNext,fast=head.next,slow=head;// ä¸­ç‚¹çš„ä¸‹ä¸€ä¸ªå…ƒç´ æŒ‡é’ˆï¼Œå¿«æ…¢æŒ‡é’ˆ(ç”¨äºå¿«é€ŸæŸ¥æ‰¾é“¾è¡¨ä¸­ç‚¹ä½ç½®)
            while(fast!=null&&fast.next!=null){
                fast = fast.next.next;
                slow = slow.next;
            }
            // midNextå°±æ˜¯ä¸­ç‚¹çš„å³è¾¹åŒºåŸŸï¼Œslowåœä¸‹æ¥çš„ä½ç½®åˆšå¥½æ˜¯ä¸­ç‚¹
            midNext = slow.next;
            slow.next = null;
    
            // (2)å·¦å³æ‹†åˆ†
            ListNode left = sortList(head);
            ListNode right = sortList(midNext);
    
            // (3)ä¸¤ä¸¤åˆå¹¶
            ListNode tail = new ListNode(0),res = tail;
            while(left!=null&&right!=null){
                if(left.val<right.val){
                    tail.next = left;
                    left = left.next;
                }else{
                    tail.next = right;
                    right = right.next;
                }
                tail = tail.next;
            }
            tail.next = left!=null?left:right;
            return res.next;
        }
    }
    ```

  3. å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨

  + è¯­è¨€ï¼šjava

  + æ€è·¯ï¼š3è½®å¾ªç¯ã€‚

    + ç¬¬ä¸€è½®ï¼Œæ¯ä¸ªæºèŠ‚ç‚¹åé¢æ’å…¥æ·±æ‹·è´åçš„èŠ‚ç‚¹ã€‚å½¢æˆ"æº->æ·±->æº->æ–°->æº->æ–°->null"ã€‚
    + ç¬¬äºŒè½®ï¼Œæ·±æ‹·è´é“¾è¡¨è®¾ç½®random
    + ç¬¬ä¸‰è½®ï¼Œæºé“¾è¡¨è¿˜åŸï¼Œæ·±æ‹·è´ä¹Ÿç‹¬ç«‹å‡ºæ¥ã€‚å½¢æˆ"æº->æº->æº->null"å’Œ"æ–°->æ–°->æ–°->null"

  + ä»£ç ï¼ˆ0msï¼‰ï¼š

    ```java
    
    class Solution {
        public Node copyRandomList(Node head) {
            if(head==null)
                return null;
            Node tmp = head;
            while(tmp != null){
                Node newNode = new Node(tmp.val);
                newNode.next = tmp.next;
                tmp.next = newNode;
                tmp = newNode.next;
            }
    
            tmp = head;
            while(tmp!=null){
                tmp.next.random = tmp.random==null?null:tmp.random.next;
                tmp = tmp.next.next;
            }
            tmp = head;
            Node resTmp=tmp.next,res = head.next;
            while(tmp!=null){
                tmp.next = resTmp.next;
                tmp = tmp.next;
                resTmp.next = tmp == null?null:tmp.next;
                resTmp = resTmp.next;
            }
            return res;
        }
    }
    
    ```

    


