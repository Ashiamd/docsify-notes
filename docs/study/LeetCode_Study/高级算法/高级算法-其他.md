# é«˜çº§ç®—æ³•

> é¢˜åº“é“¾æ¥ï¼šhttps://leetcode-cn.com/explore/interview/card/top-interview-questions-hard/

* å…¶ä»–

  1.  Queue Reconstruction by Height

   + è¯­è¨€ï¼šjava

   + æ€è·¯ï¼šçœ‹èµ·æ¥å°±æ˜¯è¦æ’åºï¼Œä½†æ˜¯é—®é¢˜æ˜¯æ€ä¹ˆæ’åºã€‚ç”±äºé«˜çš„ï¼Œå¯ä»¥æœ€å…ˆç¡®å®šä½ç½®ï¼ˆå› ä¸ºkåªå—é«˜åº¦ç­‰äºè‡ªå·±æˆ–è€…é«˜äºè‡ªå·±çš„å½±å“ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥çŒœæƒ³ï¼Œå…ˆä»é«˜åˆ°ä½æ’åºï¼Œç„¶åå†æŠŠæ¯ä¸ªäººæ’å…¥åˆ°æœ€åçš„ä½ç½®é‡Œã€‚

   + ä»£ç ï¼ˆ10msï¼Œ66.32%ï¼‰ï¼š
  
     ```java
     class Solution {
         public int[][] reconstructQueue(int[][] people) {
             // å¦‚æœ èº«é«˜hç›¸åŒï¼Œå°±æ¯”è¾ƒkå€¼(æ’åœ¨è‡ªå·±å‰é¢ï¼Œä¸”èº«é«˜h>=è‡ªå·±çš„äººæ•°)ï¼Œkè¶Šå°è¶Šå‰é¢ï¼›
             // ä¼˜å…ˆè€ƒè™‘çš„æ˜¯èº«é«˜hï¼Œhè¶Šå¤§è¶Šé å‰ï¼Œå…¶æ¬¡ kè¶Šå°è¶Šé å‰
             Arrays.sort(people, (int[] p1,int[] p2)->p1[0]==p2[0]?p1[1]-p2[1]:p2[0]-p1[0]);
     
             // æ’åºå®Œåï¼ŒæŒ‰ç…§kå€¼æ’å…¥ä½ç½®å°±å¥½äº†(å‰é¢æœ‰å‡ ä¸ª>=è‡ªå·±èº«é«˜çš„)
             LinkedList<int[]> list = new LinkedList<>();
             for(int[] mem:people){
                 list.add(mem[1],mem);
             }
             return list.toArray(new int[list.size()][2]);
         }
     }
     ```
  
  + å‚è€ƒä»£ç 1ï¼ˆ2msï¼‰ï¼šæ€è·¯ä¸€è‡´ï¼Œå°±æ˜¯ä¼˜åŒ–äº†å†™æ³•ã€‚
  
    ```java
    class Solution {
        public int[][] reconstructQueue(int[][] people) {
            sort(people, 0, people.length - 1);
    
            for (int i = people.length - 2; i >= 0; i--) {
                int[] curr = people[i];
                if (curr[1] > 0) {
                    shiftBack(people, i, curr[1]);
                }
            }
    
            return people;
        }
    
        private void shiftBack(int[][] arr, int pos, int shift) {
            int[] tmp = arr[pos];
            System.arraycopy(arr, pos + 1, arr, pos, shift);
            arr[pos + shift] = tmp;
        }
    
        private void sort(int[][] arr, int lo, int hi) {
            if (lo > hi) {
                return;
            }
            int[] base = arr[lo];
            int pivot = lo;
            for (int i = lo + 1; i <= hi; i++) {
                int[] t = arr[i];
                if (t[0] < base[0] || t[0] == base[0] && t[1] >= base[1]) {
                    swap(arr, ++pivot, i);
                }
            }
            swap(arr, pivot, lo);
            sort(arr, lo, pivot - 1);
            sort(arr, pivot + 1, hi);
        }
    
        private void swap(int[][] arr, int from, int to) {
            if (from == to) {
                return;
            }
            int[] tmp = arr[from];
            arr[from] = arr[to];
            arr[to] = tmp;
        }
    }
    ```
  
  2. æ¥é›¨æ°´
  
  + è¯­è¨€ï¼šjava
  
  + æ€è·¯ï¼šè¿™é¢˜å…¶å®ä¸ç®¡æ˜¯å•è°ƒæ ˆè¿˜æ˜¯åŒæŒ‡é’ˆï¼Œå…¶å®éƒ½èƒ½æƒ³åˆ°æ€è·¯ï¼Œå°±æ˜¯ä»£ç ä¸æ¸…æ¥šæ€ä¹ˆå†™ï¼Œè¿™æ˜¯æ¯”è¾ƒå¸¸è§çš„é—®é¢˜ã€‚ï¼ˆæ€è·¯å¤§è‡´æœ‰ï¼Œä½†æ˜¯ä»£ç ä¸å¤ªæ‡‚æ€ä¹ˆå®ç°ï¼‰ï¼Œè¿˜æ˜¯éœ€è¦å¤šç»ƒã€‚
  
  + ä»£ç 1ï¼ˆ3msï¼Œ37.61%ï¼‰ï¼šå•è°ƒæ ˆï¼Œç»´æŠ¤ä¸€ä¸ªé€’å‡çš„å•è°ƒæ ˆï¼Œå¦‚æœå½“å‰å€¼æ¯”æ ˆé¡¶å¤§ï¼Œé‚£ä¹ˆå°±å¯èƒ½æœ‰é›¨æ°´ï¼ˆå¦‚æœæ­£å¥½ä½ç½®è¿ç»­ï¼Œæ¯”å¦‚iå’Œi+1ï¼Œå°±æ²¡é›¨æ°´ï¼‰
  
    > [å•è°ƒæ ˆO(n)è§£å†³ï¼ŒåŠ¨å›¾é¢„è­¦ğŸ¶ğŸµ](https://leetcode-cn.com/problems/trapping-rain-water/solution/dan-diao-zhan-jie-jue-jie-yu-shui-wen-ti-by-sweeti/)
  
    ```java
    class Solution {
        public int trap(int[] height) {
            // åªå­˜ä¸‹æ ‡ï¼Œå•è°ƒæ ˆï¼Œå•è°ƒé€’å‡
            LinkedList<Integer> stack = new LinkedList<>();
            int sum = 0;
            for(int i = 0,len = height.length;i<len;++i){
                while(!stack.isEmpty()&&height[i]> height[stack.peekFirst()]){
                    int curTopIndex = stack.pollFirst();
                    // å¦‚æœæ ˆå†…æœ‰å¤šä¸ªç›¸åŒçš„å…ƒç´ ï¼Œé‚£ä¹ˆå°±å¼¹å‡ºã€‚æ¯”å¦‚é«˜åº¦2 0 0 0 1,ä¸­é—´çš„0åªè¦è®°ä½ä¸€ä¸ªå°±å¥½äº†
                    while(!stack.isEmpty()&&height[stack.peekFirst()]==height[curTopIndex]){
                        stack.pollFirst();
                    }
                    //åªæœ‰æ ˆä¸ä¸ºç©ºï¼Œæ‰è¯´æ˜æœ‰å·¦è¾¹ç•Œã€‚
                    if(!stack.isEmpty()){
                        int leftIndex = stack.peekFirst();// å·¦è¾¹ç•Œä½ç½®
                        // è¿™ä¸ªé«˜åº¦è®¡ç®—æ˜¯ã€é‡ç‚¹ã€‘ï¼Œæ¯”å¦‚54321012345,é‡åˆ°ç¬¬2ä¸ªâ€œ2â€çš„æ—¶å€™ï¼Œè®¡ç®—å‡ºé«˜åº¦æ˜¯1ï¼Œè€Œä¸æ˜¯2
                        sum += (Math.min(height[leftIndex],height[i])-height[curTopIndex])// é«˜åº¦,å·¦å³è¾¹ç•Œæœ€å°å€¼-å‡¹æ§½çš„é«˜åº¦
                            * (i-leftIndex-1); // é«˜ * å®½
                    }
                }
                stack.addFirst(i);
            }
            return sum;
        }
    }
    ```
  
  + ä»£ç 2ï¼ˆ1msï¼Œ99.98%ï¼‰ï¼šå·¦å³åŒæŒ‡é’ˆã€‚
  
    1. é¦–å…ˆçŸ¥é“ï¼Œæ•´ä½“çš„è¯ï¼Œå¯ä»¥è§†ä¸ºä¸€ä¸ªå¤§æœ¨æ¡¶ï¼Œé‚£ä¹ˆå¤§æœ¨æ¡¶è£…æ°´ï¼ŒçŸ­æ¿å†³å®šè“„æ°´é‡ï¼›æ‰€ä»¥å·¦å³æŒ‡é’ˆç§»åŠ¨è°ï¼Œå–å†³äºè°æ›´çŸ­ï¼Œæ›´çŸ­çš„ä¸€å¤´ï¼Œå¯ä»¥è®¡ç®—è“„æ°´é‡ï¼ˆå› ä¸ºæ˜ç¡®çŸ­æ¿é«˜åº¦äº†ï¼‰
  
    2. leftæˆ–è€…rightå·¦å³æŒ‡é’ˆç§»åŠ¨æ—¶ï¼Œæ€ä¹ˆè®¡ç®—è“„æ°´é‡ï¼Ÿè¿™é‡Œè®¨è®ºå·¦è¾¹ï¼Œå³è¾¹åŒç†ã€‚å·¦è¾¹æŸä¸€åˆ—çš„è“„æ°´é‡å³ï¼ˆå·¦è¾¹å‡ºç°è¿‡çš„æœ€é•¿æ¿-å½“å‰é«˜åº¦ï¼‰ã€‚æ¯”å¦‚345009ï¼Œé‚£ä¹ˆéå†åˆ°ä¸‹æ ‡3ä¹Ÿå°±æ˜¯å¯¹åº”ç¬¬ä¸€ä¸ªæ•°å­—0æ—¶ï¼Œleft_maxå·¦è¾¹æœ€é•¿è¾¹æ˜¯5ï¼Œè¿™ä¸€åˆ—è“„æ°´é‡å°±æ˜¯ï¼ˆ5-0ï¼‰ã€‚ä»è¿™é‡Œç¤ºä¾‹ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œå› ä¸ºå·¦è¾¹éƒ½æ¯”è¾ƒçŸ­ï¼Œæ‰€ä»¥å·¦è¾¹å¯ä»¥å…ˆè®¡ç®—è“„æ°´é‡ï¼Œæ‰€ä»¥ç§»åŠ¨çš„æ˜¯leftæŒ‡é’ˆã€‚
  
    > [è¯¦ç»†é€šä¿—çš„æ€è·¯åˆ†æï¼Œå¤šè§£æ³•](https://leetcode-cn.com/problems/trapping-rain-water/solution/xiang-xi-tong-su-de-si-lu-fen-xi-duo-jie-fa-by-w-8/)
    >
    > [æ¥é›¨æ°´--å®˜æ–¹è§£é¢˜](https://leetcode-cn.com/problems/trapping-rain-water/solution/jie-yu-shui-by-leetcode/327718/)çš„è¯„è®ºåŒº
  
    ```java
    class Solution {
        public int trap(int[] height) {
            int len = height.length, sum = 0, left_max = 0, right_max = 0, left = 0, right = len - 1;
            while (left < right) {
                // å¦‚æœå·¦æŒ‡é’ˆlefté«˜åº¦è¾ƒä½ï¼Œé‚£ä¹ˆç§»åŠ¨å·¦æŒ‡é’ˆ(å› ä¸ºæŠŠæ•´ä½“è§†ä½œä¸€ä¸ªæœ¨æ¡¶çš„è¯ï¼ŒçŸ­æ¿å†³å®šè“„æ°´é‡)
                if(height[left]<height[right]){
                    // å¦‚æœå½“å‰å·¦æŒ‡é’ˆæŒ‡å‘ä½ç½®æ˜¯å‡¹æ§½ï¼Œé‚£ä¹ˆæ‰èƒ½è“„æ°´ï¼Œä¸ç„¶å°±æ›´æ–°å·¦è¾¹è¾¹ç•Œæœ€å¤§å€¼
                    if(height[left]<left_max)
                        sum += left_max-height[left];
                    else
                        left_max = height[left];
                    ++left;
                }else{
                    if(height[right]<right_max)
                        sum += right_max-height[right];
                    else
                        right_max = height[right];
                    --right;
                }
            }
            return sum;
        }
    }
    ```
  
  3. å¤©é™…çº¿é—®é¢˜
  
  + è¯­è¨€ï¼šjava
  
  + æ€è·¯ï¼šå½’å¹¶
  
    > [å¤©é™…çº¿é—®é¢˜--å®˜æ–¹è§£é¢˜](https://leetcode-cn.com/problems/the-skyline-problem/solution/tian-ji-xian-wen-ti-by-leetcode/)
    >
    > [è¯¦ç»†é€šä¿—çš„æ€è·¯åˆ†æï¼Œå¤šè§£æ³•](https://leetcode-cn.com/problems/the-skyline-problem/solution/xiang-xi-tong-su-de-si-lu-fen-xi-duo-jie-fa-by--45/)
  
  + ä»£ç ï¼ˆ8msï¼Œ97.02%ï¼‰ï¼šå…ˆæ‹†åˆ†åå›æº¯åˆå¹¶ç»“æœé›†ã€‚
  
    ```java
    class Solution {
        public List<List<Integer>> getSkyline(int[][] buildings) {
            int len = buildings.length;
            return len == 0 ? new ArrayList<>() : merge(buildings, 0, len - 1);
        }
    
        public List<List<Integer>> merge(int[][] buildings, int left, int right) {
            List<List<Integer>> res = new ArrayList<>();
    
            // åªå‰©æœ€åä¸€ä¸ªå…ƒç´ äº†,ç›´æ¥åŠ å…¥resã€‚æ·»åŠ é•¿æ–¹å½¢çš„â€œå·¦ä¸Šè§’ç‚¹â€å’Œâ€œå³ä¸‹è§’ç‚¹â€
            if (left == right) {
                List<Integer> point = new ArrayList<>();
                point.add(buildings[left][0]);
                point.add(buildings[left][2]);
                res.add(point); // å·¦ä¸Šè§’ç‚¹(x,height)
    
                point = new ArrayList<>();
                point.add(buildings[right][1]);
                point.add(0);
                res.add(point); // å³ä¸‹è§’ç‚¹(y,0)
            } else { // è¿˜æœ‰åˆ«çš„å…ƒç´ ï¼Œé‚£ä¹ˆä¸€ç›´äºŒåˆ†æ‹†åˆ†ï¼Œç›´åˆ°æ‹†åˆ†åˆ°æ¯ä»½åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åå›æº¯åˆå¹¶ç»“æœ
    
                // (1) äºŒåˆ† -> ç›´è‡³ æ¯ä»½åªæœ‰ä¸€ä¸ªç‚¹
                int mid = left + (right - left) / 2;
                List<List<Integer>> leftRes = merge(buildings, left, mid);
                List<List<Integer>> rightRes = merge(buildings, mid + 1, right);
    
                // (2) å›æº¯,åˆå¹¶
                /**
                     * æ¯ä¸ªç‚¹ï¼Œå¦‚æœè§†ä¸º(x,y)ï¼Œé‚£ä¹ˆä¸¤ä¸ªç‚¹(x1,y1),(x2,y2)æŒ‰ç…§ä¸€ä¸‹è§„åˆ™åˆå¹¶ç»“æœres
                     * 1. x1<x2 é‚£ä¹ˆx1æ›´é å·¦è¾¹ï¼Œé‚£ä¹ˆresæœ€ååŠ å…¥çš„ç‚¹(x,y)çš„x = x1,è€Œyéœ€è¦è®¨è®ºã€‚
                     * 2. x2<x1 é‚£ä¹ˆx2æ›´é å·¦è¾¹ï¼Œé‚£ä¹ˆresæœ€ååŠ å…¥çš„ç‚¹(x,y)çš„x = x2,è€Œyéœ€è¦è®¨è®ºã€‚
                     * 3. å…³äºyï¼Œéœ€è¦å–(x1,y1)å’Œ(x2,y2)çš„æœ€å¤§å€¼ï¼Œå› ä¸ºè¿™é‡Œ(x,y)å…¶å®å¯èƒ½æ˜¯åŸæœ¬point(x,y,h)çš„(y,h)
                     * è€Œ(y,h)ï¼Œæˆ‘ä»¬å‰é¢æ‹†åˆ†åˆ°åªå‰©æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå­˜çš„ä¿¡æ¯æ˜¯(x,h)å’Œ(y,0)ï¼Œä¹Ÿå°±æ˜¯(y,h)å®é™…ä¸Šæ˜¯(y,0)
                     * æˆ‘ä»¬éœ€è¦å–h1å’Œh2çš„æœ€å¤§å€¼ï¼Œä½œä¸ºå®é™…çš„h
                     */
                int len1 = leftRes.size(), len2 = rightRes.size();
                int i = 0, j = 0;// éå†å·¦è¾¹leftReså’Œå³è¾¹rightResçš„æŒ‡é’ˆ
                int h1 = 0, h2 = 0; //ä¸­é—´æ¯”è¾ƒå·¦è¾¹éƒ¨åˆ†å’Œå³è¾¹éƒ¨åˆ†çš„é«˜åº¦çš„ é«˜åº¦å€¼h1ï¼Œh2
                while (i < len1 || j < len2) { // å¯èƒ½æœ‰ä¸€æ–¹å…ˆéå†å®Œï¼Œæ‰€ä»¥ç”¨||è€Œä¸æ˜¯&&
                    long x1 = i < len1 ? leftRes.get(i).get(0) : Long.MAX_VALUE;
                    long x2 = j < len2 ? rightRes.get(j).get(0) : Long.MAX_VALUE;
                    long x; // æ¯ä¸€è½®å®é™…åŠ å…¥resçš„ç‚¹çš„x
    
                    if(x1<x2){
                        h1 = leftRes.get(i).get(1);
                        x = x1;
                        ++i;
                    }else if(x1>x2){
                        h2 = rightRes.get(j).get(1);
                        x = x2;
                        ++j;
                    }else{
                        h1 = leftRes.get(i).get(1);
                        h2 = rightRes.get(j).get(1);
                        x = x1; // x = x2ä¹Ÿä¸€æ ·ï¼Œåæ­£è¿™é‡Œx1 == x2
                        ++i;
                        ++j;
                    }
                    // è®¨è®ºyå€¼ï¼Œheight
                    int height = Math.max(h1, h2);
                    // ä¸åŠ å…¥é‡å¤è§£(resè¿˜æ²¡æœ‰å­˜æ•°æ®ï¼Œæˆ–è€… ä¸Šä¸€ä¸ªç‚¹çš„heightå’Œè¿™æ¬¡ä¸åŒï¼Œæ‰åŠ å…¥res)
                    if(res.isEmpty()||height!=res.get(res.size()-1).get(1)){
                        List<Integer> point = new ArrayList<>();
                        point.add((int)x);
                        point.add(height);
                        res.add(point);
                    }
                }
            }
            return res;
        }
    }
    ```
  
  + å‚è€ƒä»£ç 1ï¼ˆ4msï¼‰ï¼š
  
    ```java
    class Solution {
    
        private static class Building {
            int loc;
            int height;
            int type;
    
            public Building(int loc, int height, int type) {
                this.loc = loc;
                this.height = height;
                this.type = type;
            }
        }
    
        public List<List<Integer>> getSkyline(int[][] buildings) {
            List<List<Integer>> res = new ArrayList<>();
            //é»˜è®¤è¾“å…¥å·²ç»æŒ‰ç…§èµ·ç‚¹æ’åº
            //æŒ‰ç…§é«˜åº¦é™åºï¼ŒåŒé«˜åº¦æ ¹æ®èµ·ç‚¹å‡åº
            PriorityQueue<int[]> heightHeap = new PriorityQueue<>(new Comparator<int[]>() {
                public int compare(int[] a, int[] b) {
                    return a[2] == b[2] ? a[0] - b[0] : b[2] - a[2];
                }
            });
    
            //é»˜è®¤èµ·ç‚¹ï¼ŒPREä¿å­˜å‰é¢èƒ½çœ‹è§çš„æœ€é«˜å»ºç­‘å’Œä»–çš„ç»ˆç‚¹èµ·ç‚¹
            int[] pre = new int[]{Integer.MIN_VALUE, Integer.MAX_VALUE, 0};
            for (int[] b : buildings) {
                // å½“å‡ºç°æ–­ç‚¹æƒ…å†µï¼Œéœ€è¦æ¸…ç©ºä¹‹å‰å»ºç­‘ç¾¤
                while (!heightHeap.isEmpty() && b[0] > pre[1]) {
                    //è·å–ä¹‹å‰æœ€é«˜å»ºç­‘
                    int[] curHighest = heightHeap.poll();
                    //å¦‚æœæœ€é«˜çš„ç»ˆç‚¹åœ¨PREä¹‹å‰ï¼Œè¯´æ˜å·²ç»å¤„ç†
                    if (curHighest[1] <= pre[1]) continue;
                    //å¦‚æœé‡åˆ°PREä¹‹åçš„ç‚¹ï¼ŒåŠ å…¥ç»“æœå¹¶æ›´æ–°PRE
                    res.add(Arrays.asList(pre[1], curHighest[2]));
                    pre = curHighest;
                }
    
                //å½“å‰å»ºç­‘æ¯”ä¹‹å‰å»ºç­‘é«˜
                if (b[2] > pre[2]) {
                    if (b[0] == pre[0]) {
                        //åŒèµ·ç‚¹æƒ…å†µä¸‹ï¼ŒçŸ®å»ºç­‘å¿…ç„¶è¢«æŒ¡ä½ï¼Œç›´æ¥åˆ é™¤
                        res.remove(res.size() - 1);
                    }
                    res.add(Arrays.asList(b[0], b[2])); //æœªè¢«ä¹‹åé®æŒ¡å‰å…ˆåŠ å…¥ç»“æœ
                    if (b[1] < pre[1]) {
                        heightHeap.offer(pre); //å¦‚æœç»ˆç‚¹å°äºå‰ç»ˆç‚¹ï¼Œå°†å‰å€¼å…¥å †
                    }
                    pre = b;//æ›´æ–°å‰å€¼å› ä¸ºå‘ç°äº†æ›´é«˜çš„
                } else if (b[2] == pre[2]) { //åŒé«˜åº¦ç»§ç»­å»¶ä¼¸END
                    pre[1] = b[1];
                } else if (b[1] > pre[1]) {
                    heightHeap.offer(b); //çŸ®å»ºç­‘ç›´æ¥å…¥å †
                }
            }
    
    
            while (!heightHeap.isEmpty()) {
                //å¦‚æœå †ä¸ä¸ºç©ºï¼Œé‡å¤ä¹‹å‰æ“ä½œ
                int[] cur = heightHeap.poll();
                if (cur[1] <= pre[1]) continue;
                res.add(Arrays.asList(pre[1], cur[2]));
                pre = cur;
            }
            //æœ€åæœ‰å‰©ä½™
            if (pre[2] > 0) {
                res.add(Arrays.asList(pre[1], 0));
            }
            return res;
        }
    }
    ```
  
  4. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢
  
  + è¯­è¨€ï¼šjava
  
  + æ€è·¯ï¼šæš´åŠ›ï¼Œæ¯æ¬¡æ‰¾å·¦è¾¹ç•Œå’Œå³è¾¹ç•Œï¼Œè®¡ç®—çŸ©å½¢é¢ç§¯ã€‚
  
  + ä»£ç 1ï¼ˆ1063msï¼Œ10.53%ï¼‰ï¼šå®‡å®™æ— æ•Œè¶…çº§æ…¢
  
    ```java
    class Solution {
        public int largestRectangleArea(int[] heights) {
            int maxArea = 0;
            for(int i = 0,len = heights.length,j,width;i<len;++i){
                width = 1;//é»˜è®¤ä½ç½®iæœ¬èº«å°±æ˜¯å®½åº¦1
                j = i;
                while(--j>=0&&heights[j]>=heights[i])
                    ++width;
                j = i;
                while(++j<len&&heights[j]>=heights[i])
                    ++width;
                maxArea = Math.max(maxArea,width*heights[i]);
            }
            return maxArea;
        }
    }
    ```
  
  + ä»£ç 2ï¼ˆ10msï¼Œ91.57%ï¼‰ï¼šå•è°ƒæ ˆ+å“¨å…µã€‚å·¦å³ä¸¤è¾¹å¤šè¡¥ä¸€ä¸ªè¾¹ç•Œé«˜åº¦0ï¼Œé¿å…å¯¹ç‰¹æ®Šæƒ…å†µçš„è®¨è®ºã€‚
  
    > [æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢--å®˜æ–¹é¢˜è§£](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/solution/zhu-zhuang-tu-zhong-zui-da-de-ju-xing-by-leetcode-/)
    >
    > [è¯¦è§£å•è°ƒæ ˆï¼ŒğŸ¤·â€â™€ï¸å¿…é¡»ç§’æ‡‚ï¼](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/solution/xiang-jie-dan-diao-zhan-bi-xu-miao-dong-by-sweetie/)
  
    ```java
    class Solution {
       public int largestRectangleArea(int[] heights) {
            int len = heights.length;
            int[] height = new int[len+2];
            int maxArea = 0;
    
            // æ‹·è´åŸæ•°ç»„çš„æ•°å€¼ï¼Œä»ä¸‹æ ‡1å¼€å§‹
            System.arraycopy(heights,0, height, 1, len);
            len+=2; // lenå˜æˆæ–°æ•°ç»„çš„é•¿åº¦
    
            LinkedList<Integer> stack = new LinkedList<>();// å•è°ƒæ ˆï¼Œå•è°ƒé€’å¢
            for(int i = 0,index;i<len;++i){
                while(!stack.isEmpty()&&height[i]<height[stack.peekFirst()]){
                    index = stack.pollFirst();// ä¸Šä¸€æ¬¡çš„é«˜åº¦
                    // å®½åº¦å°±æ˜¯ å½“å‰i - ä¸Šä¸€æ¬¡çš„é«˜åº¦çš„ä¸Šä¸€ä¸ªè¾¹ç•Œ-1
                    // æ¯”å¦‚ 0 3 4 5 1 0 é‚£ä¹ˆå¯¹5æ¥è¯´ï¼Œå®½åº¦å°±æ˜¯ (â€œ1â€çš„ä¸‹æ ‡-â€œ4â€çš„ä¸‹æ ‡-1)
                    maxArea = Math.max(maxArea,height[index]*(i-stack.peekFirst()-1));
                }
                stack.addFirst(i);
            }
            return maxArea;
        }
    }
    ```
  
  + å‚è€ƒä»£ç 1ï¼ˆ13msï¼Œ73.77%ï¼‰ï¼šéå†ä¸€æ¬¡ï¼Œåˆ©ç”¨å•è°ƒé€’å‡çš„å•è°ƒæ ˆæ¥è®¡ç®—å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³è¾¹ç•Œä¸‹æ ‡å€¼ã€‚ç„¶åæœ€åå†ç»Ÿä¸€è®¡ç®—çŸ©å½¢æœ€å¤§é¢ç§¯ã€‚
  
    > [æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢--å®˜æ–¹é¢˜è§£](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/solution/zhu-zhuang-tu-zhong-zui-da-de-ju-xing-by-leetcode-/)
  
    ```java
    class Solution {
        public int largestRectangleArea(int[] heights) {
            int n = heights.length;
            int[] left = new int[n];
            int[] right = new int[n];
            Arrays.fill(right, n);
    
            Stack<Integer> mono_stack = new Stack<Integer>();
            for (int i = 0; i < n; ++i) {
                while (!mono_stack.isEmpty() && heights[mono_stack.peek()] >= heights[i]) {
                    right[mono_stack.peek()] = i;
                    mono_stack.pop();
                }
                left[i] = (mono_stack.isEmpty() ? -1 : mono_stack.peek());
                mono_stack.push(i);
            }
    
            int ans = 0;
            for (int i = 0; i < n; ++i) {
                ans = Math.max(ans, (right[i] - left[i] - 1) * heights[i]);
            }
            return ans;
        }
    }
    ```
  
    